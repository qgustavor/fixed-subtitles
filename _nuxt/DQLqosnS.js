const L=function(){return function(){return function n(r,h,s){function l(o,t){if(!h[o]){if(!r[o]){var i=typeof require=="function"&&require;if(!t&&i)return i(o,!0);if(e)return e(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=h[o]={exports:{}};r[o][0].call(c.exports,function(p){return l(r[o][1][p]||p)},c,c.exports,n,r,h,s)}return h[o].exports}for(var e=typeof require=="function"&&require,a=0;a<s.length;a++)l(s[a]);return l}}()({1:[function(n,r,h){var s=n("regexp.execall"),l=n("fzip"),e=n("flatmap"),a=n("./src/descriptor"),o=function(i,u){u=u||{};var c=null;return e(i,function(p){var f=a(p,c);return f&&(f.type!="comment"||u.comments)?(c||f.key!="Format"||(c=f.value),[f]):null})},t=function(i,u){i=i.toString();var c=s(/^\s*\[(.*)\]\s*$/gm,i);return l(c,c.slice(1),function(p,f){var b=p[1],_=p.index+p[0].length+1,v=f?f.index:i.length,g=i.slice(_,v).split(`
`);return{section:b,body:o(g,u)}})};r.exports=t,r.exports.default=t},{"./src/descriptor":42,flatmap:2,fzip:3,"regexp.execall":40}],2:[function(n,r,h){r.exports=function(s,l,e){var a=[];return Array.isArray(s)&&s.forEach(function(o,t,i){var u=l.call(e,o,t,i);Array.isArray(u)?a.push.apply(a,u):u!=null&&a.push(u)}),a}},{}],3:[function(n,r,h){var s=n("./zip"),l=n("lodash.zipobject"),e=function(a){return function(){if(!arguments.length)return null;var o,t=[].slice.call(arguments,0,-1),i=[].slice.call(arguments,-1)[0];return typeof i=="string"&&(o=i.split(",").map(Function.call.bind("".trim)),i=function(){return l(o,arguments)}),typeof i!="function"?(t.push(i),s.apply(null,t)):t.length?s.apply(null,t)[a](function(u){return i.apply(null,u)}):null}};r.exports=e("map"),r.exports.each=e("forEach")},{"./zip":4,"lodash.zipobject":39}],4:[function(n,r,h){var s=n("lodash.zip");r.exports=function(){return arguments.length>1?s.apply(null,arguments):arguments.length==1?arguments[0].map(function(l){return[l]}):null}},{"lodash.zip":38}],5:[function(n,r,h){r.exports=[]},{}],6:[function(n,r,h){var s=n("lodash._basecreate"),l=n("lodash.isobject"),e=n("lodash._setbinddata"),a=n("lodash._slice"),o=[].push;r.exports=function(t){var i=t[0],u=t[2],c=t[4];function p(){if(u){var f=a(u);o.apply(f,arguments)}if(this instanceof p){var b=s(i.prototype),_=i.apply(b,f||arguments);return l(_)?_:b}return i.apply(c,f||arguments)}return e(p,t),p}},{"lodash._basecreate":7,"lodash._setbinddata":18,"lodash._slice":20,"lodash.isobject":29}],7:[function(n,r,h){(function(s){var l=n("lodash._isnative"),e=n("lodash.isobject"),a=(n("lodash.noop"),l(a=Object.create)&&a);function o(t,i){return e(t)?a(t):{}}a||(o=function(){function t(){}return function(i){if(e(i)){t.prototype=i;var u=new t;t.prototype=null}return u||s.Object()}}()),r.exports=o}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._isnative":14,"lodash.isobject":29,"lodash.noop":34}],8:[function(n,r,h){var s=n("lodash.bind"),l=n("lodash.identity"),e=n("lodash._setbinddata"),a=n("lodash.support"),o=/^\s*function[ \n\r\t]+\w/,t=/\bthis\b/,i=Function.prototype.toString;r.exports=function(u,c,p){if(typeof u!="function")return l;if(c===void 0||!("prototype"in u))return u;var f=u.__bindData__;if(f===void 0&&(a.funcNames&&(f=!u.name),!(f=f||!a.funcDecomp))){var b=i.call(u);a.funcNames||(f=!o.test(b)),f||(f=t.test(b),e(u,f))}if(f===!1||f!==!0&&1&f[1])return u;switch(p){case 1:return function(_){return u.call(c,_)};case 2:return function(_,v){return u.call(c,_,v)};case 3:return function(_,v,g){return u.call(c,_,v,g)};case 4:return function(_,v,g,j){return u.call(c,_,v,g,j)}}return s(u,c)}},{"lodash._setbinddata":18,"lodash.bind":21,"lodash.identity":26,"lodash.support":37}],9:[function(n,r,h){var s=n("lodash._basecreate"),l=n("lodash.isobject"),e=n("lodash._setbinddata"),a=n("lodash._slice"),o=[].push;r.exports=function t(i){var u=i[0],c=i[1],p=i[2],f=i[3],b=i[4],_=i[5],v=1&c,g=2&c,j=4&c,k=8&c,y=u;function d(){var w=v?b:this;if(p){var m=a(p);o.apply(m,arguments)}if((f||j)&&(m||(m=a(arguments)),f&&o.apply(m,f),j&&m.length<_))return c|=16,t([u,k?c:-4&c,m,null,b,_]);if(m||(m=arguments),g&&(u=w[y]),this instanceof d){w=s(u.prototype);var x=u.apply(w,m);return l(x)?x:w}return u.apply(w,m)}return e(d,i),d}},{"lodash._basecreate":7,"lodash._setbinddata":18,"lodash._slice":20,"lodash.isobject":29}],10:[function(n,r,h){var s=n("lodash.forin"),l=n("lodash._getarray"),e=n("lodash.isfunction"),a=n("lodash._objecttypes"),o=n("lodash._releasearray"),t="[object Arguments]",i="[object Array]",u="[object Boolean]",c="[object Date]",p="[object Number]",f="[object Object]",b="[object RegExp]",_="[object String]",v=Object.prototype,g=v.toString,j=v.hasOwnProperty;r.exports=function k(y,d,w,m,x,S){if(w){var O=w(y,d);if(O!==void 0)return!!O}if(y===d)return y!==0||1/y==1/d;var U=typeof d;if(!(y!=y||y&&a[typeof y]||d&&a[U]))return!1;if(y==null||d==null)return y===d;var z=g.call(y),q=g.call(d);if(z==t&&(z=f),q==t&&(q=f),z!=q)return!1;switch(z){case u:case c:return+y==+d;case p:return y!=+y?d!=+d:y==0?1/y==1/d:y==+d;case b:case _:return y==String(d)}var W=z==i;if(!W){var K=j.call(y,"__wrapped__"),R=j.call(d,"__wrapped__");if(K||R)return k(K?y.__wrapped__:y,R?d.__wrapped__:d,w,m,x,S);if(z!=f)return!1;var F=y.constructor,N=d.constructor;if(F!=N&&!(e(F)&&F instanceof F&&e(N)&&N instanceof N)&&"constructor"in y&&"constructor"in d)return!1}var C=!x;x||(x=l()),S||(S=l());for(var D=x.length;D--;)if(x[D]==y)return S[D]==d;var A=0;if(O=!0,x.push(y),S.push(d),W){if(D=y.length,A=d.length,(O=A==D)||m)for(;A--;){var B=D,I=d[A];if(m)for(;B--&&!(O=k(y[B],I,w,m,x,S)););else if(!(O=k(y[A],I,w,m,x,S)))break}}else s(d,function($,E,P){if(j.call(P,E))return A++,O=j.call(y,E)&&k(y[E],$,w,m,x,S)}),O&&!m&&s(y,function($,E,P){if(j.call(P,E))return O=--A>-1});return x.pop(),S.pop(),C&&(o(x),o(S)),O}},{"lodash._getarray":13,"lodash._objecttypes":16,"lodash._releasearray":17,"lodash.forin":24,"lodash.isfunction":28}],11:[function(n,r,h){r.exports=function(s){return s.charCodeAt(0)}},{}],12:[function(n,r,h){var s=n("lodash._basebind"),l=n("lodash._basecreatewrapper"),e=n("lodash.isfunction"),a=n("lodash._slice"),o=[],t=o.push,i=o.unshift;r.exports=function u(c,p,f,b,_,v){var g=1&p,j=4&p,k=16&p,y=32&p;if(!(2&p||e(c)))throw new TypeError;k&&!f.length&&(p&=-17,k=f=!1),y&&!b.length&&(p&=-33,y=b=!1);var d=c&&c.__bindData__;return d&&d!==!0?((d=a(d))[2]&&(d[2]=a(d[2])),d[3]&&(d[3]=a(d[3])),!g||1&d[1]||(d[4]=_),!g&&1&d[1]&&(p|=8),!j||4&d[1]||(d[5]=v),k&&t.apply(d[2]||(d[2]=[]),f),y&&i.apply(d[3]||(d[3]=[]),b),d[1]|=p,u.apply(null,d)):(p==1||p===17?s:l)([c,p,f,b,_,v])}},{"lodash._basebind":6,"lodash._basecreatewrapper":9,"lodash._slice":20,"lodash.isfunction":28}],13:[function(n,r,h){var s=n("lodash._arraypool");r.exports=function(){return s.pop()||[]}},{"lodash._arraypool":5}],14:[function(n,r,h){var s=Object.prototype.toString,l=RegExp("^"+String(s).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");r.exports=function(e){return typeof e=="function"&&l.test(e)}},{}],15:[function(n,r,h){r.exports=40},{}],16:[function(n,r,h){r.exports={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1}},{}],17:[function(n,r,h){var s=n("lodash._arraypool"),l=n("lodash._maxpoolsize");r.exports=function(e){e.length=0,s.length<l&&s.push(e)}},{"lodash._arraypool":5,"lodash._maxpoolsize":15}],18:[function(n,r,h){var s=n("lodash._isnative"),l=n("lodash.noop"),e={configurable:!1,enumerable:!1,value:null,writable:!1},a=function(){try{var t={},i=s(i=Object.defineProperty)&&i,u=i(t,t,t)&&i}catch{}return u}(),o=a?function(t,i){e.value=i,a(t,"__bindData__",e)}:l;r.exports=o},{"lodash._isnative":14,"lodash.noop":34}],19:[function(n,r,h){var s=n("lodash._objecttypes"),l=Object.prototype.hasOwnProperty;r.exports=function(e){var a,o=e,t=[];if(!o||!s[typeof e])return t;for(a in o)l.call(o,a)&&t.push(a);return t}},{"lodash._objecttypes":16}],20:[function(n,r,h){r.exports=function(s,l,e){l||(l=0),e===void 0&&(e=s?s.length:0);for(var a=-1,o=e-l||0,t=Array(o<0?0:o);++a<o;)t[a]=s[l+a];return t}},{}],21:[function(n,r,h){var s=n("lodash._createwrapper"),l=n("lodash._slice");r.exports=function(e,a){return arguments.length>2?s(e,17,l(arguments,2),null,a):s(e,1,null,null,a)}},{"lodash._createwrapper":12,"lodash._slice":20}],22:[function(n,r,h){var s=n("lodash._basecreatecallback"),l=n("lodash._baseisequal"),e=n("lodash.isobject"),a=n("lodash.keys"),o=n("lodash.property");r.exports=function(t,i,u){var c=typeof t;if(t==null||c=="function")return s(t,i,u);if(c!="object")return o(t);var p=a(t),f=p[0],b=t[f];return p.length!=1||b!=b||e(b)?function(_){for(var v=p.length,g=!1;v--&&(g=l(_[p[v]],t[p[v]],null,!0)););return g}:function(_){var v=_[f];return b===v&&(b!==0||1/b==1/v)}}},{"lodash._basecreatecallback":8,"lodash._baseisequal":10,"lodash.isobject":29,"lodash.keys":31,"lodash.property":36}],23:[function(n,r,h){var s=n("lodash._basecreatecallback"),l=n("lodash.forown");r.exports=function(e,a,o){var t=-1,i=e?e.length:0;if(a=a&&o===void 0?a:s(a,o,3),typeof i=="number")for(;++t<i&&a(e[t],t,e)!==!1;);else l(e,a);return e}},{"lodash._basecreatecallback":8,"lodash.forown":25}],24:[function(n,r,h){var s=n("lodash._basecreatecallback"),l=n("lodash._objecttypes");r.exports=function(e,a,o){var t,i=e,u=i;if(!i||!l[typeof i])return u;for(t in a=a&&o===void 0?a:s(a,o,3),i)if(a(i[t],t,e)===!1)return u;return u}},{"lodash._basecreatecallback":8,"lodash._objecttypes":16}],25:[function(n,r,h){var s=n("lodash._basecreatecallback"),l=n("lodash.keys"),e=n("lodash._objecttypes");r.exports=function(a,o,t){var i,u=a,c=u;if(!u||!e[typeof u])return c;o=o&&t===void 0?o:s(o,t,3);for(var p=-1,f=e[typeof u]&&l(u),b=f?f.length:0;++p<b;)if(o(u[i=f[p]],i,a)===!1)return c;return c}},{"lodash._basecreatecallback":8,"lodash._objecttypes":16,"lodash.keys":31}],26:[function(n,r,h){r.exports=function(s){return s}},{}],27:[function(n,r,h){var s=n("lodash._isnative"),l=Object.prototype.toString,e=s(e=Array.isArray)&&e,a=e||function(o){return o&&typeof o=="object"&&typeof o.length=="number"&&l.call(o)=="[object Array]"||!1};r.exports=a},{"lodash._isnative":14}],28:[function(n,r,h){r.exports=function(s){return typeof s=="function"}},{}],29:[function(n,r,h){var s=n("lodash._objecttypes");r.exports=function(l){return!(!l||!s[typeof l])}},{"lodash._objecttypes":16}],30:[function(n,r,h){var s="[object String]",l=Object.prototype.toString;r.exports=function(e){return typeof e=="string"||e&&typeof e=="object"&&l.call(e)==s||!1}},{}],31:[function(n,r,h){var s=n("lodash._isnative"),l=n("lodash.isobject"),e=n("lodash._shimkeys"),a=s(a=Object.keys)&&a,o=a?function(t){return l(t)?a(t):[]}:e;r.exports=o},{"lodash._isnative":14,"lodash._shimkeys":19,"lodash.isobject":29}],32:[function(n,r,h){var s=n("lodash.createcallback"),l=n("lodash.forown");r.exports=function(e,a,o){var t=-1,i=e?e.length:0;if(a=s(a,o,3),typeof i=="number")for(var u=Array(i);++t<i;)u[t]=a(e[t],t,e);else u=[],l(e,function(c,p,f){u[++t]=a(c,p,f)});return u}},{"lodash.createcallback":22,"lodash.forown":25}],33:[function(n,r,h){var s=n("lodash._charatcallback"),l=n("lodash.createcallback"),e=n("lodash.foreach"),a=(n("lodash.forown"),n("lodash.isarray")),o=n("lodash.isstring");r.exports=function(t,i,u){var c=-1/0,p=c;if(typeof i!="function"&&u&&u[i]===t&&(i=null),i==null&&a(t))for(var f=-1,b=t.length;++f<b;){var _=t[f];_>p&&(p=_)}else i=i==null&&o(t)?s:l(i,u,3),e(t,function(v,g,j){var k=i(v,g,j);k>c&&(c=k,p=v)});return p}},{"lodash._charatcallback":11,"lodash.createcallback":22,"lodash.foreach":23,"lodash.forown":25,"lodash.isarray":27,"lodash.isstring":30}],34:[function(n,r,h){r.exports=function(){}},{}],35:[function(n,r,h){var s=n("lodash.map");r.exports=s},{"lodash.map":32}],36:[function(n,r,h){r.exports=function(s){return function(l){return l[s]}}},{}],37:[function(n,r,h){(function(s){var l=n("lodash._isnative"),e={};e.funcDecomp=!l(s.WinRTError)&&/\bthis\b/.test(function(){return this}),e.funcNames=typeof Function.name=="string",r.exports=e}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"lodash._isnative":14}],38:[function(n,r,h){var s=n("lodash.max"),l=n("lodash.pluck");r.exports=function(){for(var e=arguments.length>1?arguments:arguments[0],a=-1,o=e?s(l(e,"length")):0,t=Array(o<0?0:o);++a<o;)t[a]=l(e,a);return t}},{"lodash.max":33,"lodash.pluck":35}],39:[function(n,r,h){var s=n("lodash.isarray");r.exports=function(l,e){var a=-1,o=l?l.length:0,t={};for(e||!o||s(l[0])||(e=[]);++a<o;){var i=l[a];e?t[i]=e[a]:i&&(t[i[0]]=i[1])}return t}},{"lodash.isarray":27}],40:[function(n,r,h){r.exports=function(s,l){var e,a=[];if(!s.global)return(e=s.exec(l))?[e]:[];for(;(e=s.exec(l))&&(a.push(e),e[0]!=""););return a}},{}],41:[function(n,r,h){var s=Function.call.bind(Object.prototype.toString);r.exports=function(l,e){if(!e){if(Array.isArray(l)&&!l.length)return{};if(Array.isArray(l[0]))return l.reduce(function(o,t){return o[t[0]]=t[1],o},{});if(a=l[0],s(a)==="[object Object]")return l.reduce(function(o,t){return o[t.key]=t.value,o},{});throw new TypeError("Expected vals to be an array")}var a;return function(o,t){return(o.length>t.length?t:o).reduce(function(i,u,c){return i[o[c]]=t[c],i},{})}(l,e)}},{}],42:[function(n,r,h){var s=n("zipmap");r.exports=function(l,e){if(/^\s*$/.test(l))return null;if(l[0]==";")return{type:"comment",value:l.slice(1)};var a=l.split(":"),o=a[0],t=a.slice(1).join(":").trim();if(e||o=="Format"){if(t=t.split(","),e&&t.length>e.length){var i=t.slice(e.length-1).join(",");t.length=e.length-1,t.push(i)}t=t.map(Function.call.bind("".trim)),e&&(t=s(e,t))}return{key:o,value:t}}},{zipmap:41}]},{},[1])(1)}();function M(n){const r=L(n),h=r.find(e=>e.section==="Events"),s=r.find(e=>e.section.includes("Styles")),l=new Set;for(const e of h.body){if(e.key!=="Dialogue")continue;let a=s.body.find(b=>b.value.Name===e.value.Style);if(a||(a=s.body.find(b=>b.value.Name==="Default")),a||(a=s.body.find(b=>b.key==="Style")),!a)continue;let o=a.value.Fontname.trim(),t=Number(a.value.Bold)===-1,i=Number(a.value.Italic)===-1;const u=()=>o+(t?":bold":"")+(i?":italic":"");let c=null;const p=()=>{const b=c;c=u(),b!==c&&l.add(c)};e.value.Text.startsWith("{")||p();const f=e.value.Text.replace(/\}\{/g,"").match(/\{.+?\}/g);if(f)for(const b of f){const _=b.slice(1,-1).match(/\\fn[^\\]+|\\[ib]\d+/g)||[];for(const v of _)v.startsWith("\\fn")?o=v.substr(3).trim():v.startsWith("\\b")?t=v.substr(2)!=="0":v.startsWith("\\i")&&(i=v.substr(2)!=="0");p()}}return Array.from(l).sort().map(e=>{const a=e.replace(/(:bold)?(:italic)?$/,""),o=e.substr(a.length).replace(/:/g,"")||"regular";return{name:a,variant:o}}).reduce((e,a)=>{const o=e.findIndex(t=>t.name===a.name);return o===-1?e.push({name:a.name,variants:[a.variant]}):e[o].variants.push(a.variant),e},[])}export{M as getFontsFromSubtitle};
